<?xml version="1.0" encoding="utf-8"?>
<s:SparkSkin xmlns:fx="http://ns.adobe.com/mxml/2009"
			 xmlns:s="library://ns.adobe.com/flex/spark"
			 addedToStage="sparkskin1_addedToStageHandler(event)"  
			 >
	
	<!-- host component -->
	<fx:Metadata>
		<![CDATA[
		/* @copy spark.skins.spark.ApplicationSkin#hostComponent     */
		[HostComponent("components.IconButton")]
		]]>
	</fx:Metadata>
	
	<fx:Script>
		<![CDATA[
			import mx.events.FlexEvent;
			import mx.styles.StyleManager;
			
			import spark.filters.ColorMatrixFilter;
			
			private var matrix:Array = [0.5, 0.5, 0.5, 0, 0,
										0.5, 0.5, 0.5, 0, 0,
										0.5, 0.5, 0.5, 0, 0,
										0, 0, 0, 1, 0];
			private var colorMatrixFilter = new ColorMatrixFilter( matrix );
			
			var color:Number = 0x33CCFF;
			var alpha:Number = 0.8;
			var blurX:Number = 35;
			var blurY:Number = 35;
			var strength:Number = 2;
			var inner:Boolean = false;
			var knockout:Boolean = false;
			var quality:Number = BitmapFilterQuality.HIGH;
			
			private  
			return new GlowFilter(color,
				alpha,
				blurX,
				blurY,
				strength,
				quality,
				inner,
				knockout);

			
			override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number) : void
			{
				var state:String = this.currentState;
				var upIcon:Class = getStyle( "upIcon" );
				var overIcon:* = getStyle( "overIcon" );
				var downIcon:* = getStyle( "downIcon" );
				var disabledIcon:* = getStyle( "disabledIcon" );
				
				if ( upImage )
					upImage.source = upIcon;
				if ( overImage ){
					if ( overIcon ){
						overImage.source = overIcon;
					}else{	
						overImage.source = upIcon;
						disabledImage.blendMode
						disabledImage.filters = new f 
					}
					
				}
				if ( downImage )
					downImage.source =  downIcon || upIcon;
				if ( disabledImage ){
					if ( disabledIcon ){
						disabledImage.source =  disabledIcon;
						disabledImage.filters = [];
					}else{
						disabledImage.source =  upIcon;
						disabledImage.filters = [ colorMatrixFilter ];
					}
				}
				
				super.updateDisplayList(unscaledWidth, unscaledHeight);
			}
			
			protected function sparkskin1_addedToStageHandler(event:Event):void
			{

			}

		]]>
	</fx:Script>
	
	<!-- states -->
	<s:states>
		<s:State name="up" />
		<s:State name="over" />
		<s:State name="down" />
		<s:State name="disabled" />
	</s:states>
	
	
	
	<s:BitmapImage id="upImage" left="0" right="0" top="0" bottom="0" includeIn="up" />
	<s:BitmapImage id="overImage" left="0" right="0" top="0" bottom="0" includeIn="over" />
	<s:BitmapImage id="downImage" blendMode="darken" left="0" right="0" top="0" bottom="0" includeIn="down" />
	<s:BitmapImage id="disabledImage" left="0" right="0" top="0" bottom="0" includeIn="disabled" />
	
</s:SparkSkin>