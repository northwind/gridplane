<?xml version="1.0" encoding="utf-8"?>
<s:SparkSkin xmlns:fx="http://ns.adobe.com/mxml/2009"
			 xmlns:s="library://ns.adobe.com/flex/spark"
			 creationComplete="sparkskin1_creationCompleteHandler(event)" 
			 >
	
	<!-- host component -->
	<fx:Metadata>
		<![CDATA[
		/* @copy spark.skins.spark.ApplicationSkin#hostComponent     */
		[HostComponent("components.IconButton")]
		]]>
	</fx:Metadata>
	
	<fx:Script>
		<![CDATA[
			import mx.events.FlexEvent;
			import mx.styles.StyleManager;
			
			import spark.filters.ColorMatrixFilter;
			private var matrix:Array = [0.5, 0.5, 0.5, 0, 0,
										0.5, 0.5, 0.5, 0, 0,
										0.5, 0.5, 0.5, 0, 0,
										0, 0, 0, 1, 0];
			
			override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number) : void
			{
//				trace( " IconButton updateDisplayList " );
//				var state:String = this.currentState;;
//				
//				var icon:Class = getStyle( state + "Icon" );
//				//如果设置了其他状态的icon则显示，没有采用默认并增加默认效果
//				if ( icon )
//				{
//					upImage.source = icon;
//				}else{
//					upImage.source = getStyle( "upIcon" );
//					
//					if ( state == "disabled" ){
//						upImage.filters = [ new ColorMatrixFilter( matrix ) ];
//						upImage.blendMode="normal";
//					}	
//					else if ( state == "over" ){
//						upImage.filters = [];
//						upImage.blendMode="lighten";
//					}
//					else if ( state == "down" ){
//						upImage.filters = [];
//						upImage.blendMode="darken";
//					}else{
//						upImage.filters = [];
//						upImage.blendMode="normal";
//					}
//				}
//				
				super.updateDisplayList(unscaledWidth, unscaledHeight);
			}
			

			protected function sparkskin1_creationCompleteHandler(event:FlexEvent):void
			{
				var state:String = this.currentState;
				var upIcon:Class = getStyle( "upIcon" );
				var overIcon:* = getStyle( "overIcon" );
				var downIcon:* = getStyle( "downIcon" );
				var disabledIcon:* = getStyle( "disabledIcon" );
				
				upImage.source = upIcon;
//				overImage.source = overIcon === undefined ? upIcon : overIcon;
//				downImage.source =  downIcon || upIcon;
//				disabledImage.source =  this.styleManager.isValidStyleValue( overIcon ) ? overIcon : upIcon;
				
//				disabledImage.filters = [ new ColorMatrixFilter( matrix ) ];
			}

		]]>
	</fx:Script>
	
	<!-- states -->
	<s:states>
		<s:State name="up" />
		<s:State name="over" />
		<s:State name="down" />
		<s:State name="disabled" />
	</s:states>
	
	<s:BitmapImage id="upImage" left="0" right="0" top="0" bottom="0" includeIn="up" />
	<s:BitmapImage id="overImage" blendMode="lighten" left="0" right="0" top="0" bottom="0" includeIn="over" />
	<s:BitmapImage id="downImage" blendMode="darken" left="0" right="0" top="0" bottom="0" includeIn="down" />
	<s:BitmapImage id="disabledImage" left="0" right="0" top="0" bottom="0" includeIn="disabled" />
	
</s:SparkSkin>